{"version":3,"sources":["webpack:///src/sequences/SequenceStepChunk/chunk_text_attached_to_arrow/ChunkTextAttachedToArrow.vue","webpack:///./src/sequences/SequenceStepChunk/chunk_text_attached_to_arrow/ChunkTextAttachedToArrow.vue","webpack:///./src/sequences/SequenceStepChunk/chunk_text_attached_to_arrow/ChunkTextAttachedToArrow.vue?4ba2","webpack:///./src/sequences/SequenceStepChunk/utils/unique_id_mixin.js","webpack:///./src/sequences/SequenceStepChunk/utils/activator_position_watcher.js"],"names":["BASE_CLASS","applyBaseClassModificator","modificator","POSITIONING_CLASSES","SequenceStepChunkTextAttachedToArrow","POSITIONS","TOP","RIGHT","BOTTOM","LEFT","ALIGNMENT_CLASSES","ALIGNMENT","WINDOW_SCROLLBAR_WIDTH","render","staticRenderFns","name","_name","mixins","activator_position_watcher","unique_id_mixin","props","sequenceId","String","stepId","chunkId","chunkDefinition","type","Object","required","anchorSelector","data","el","computed","classes","position","align","withoutArrow","style","isMounted_","toReturn","bottom","window","innerHeight","activatorBounding","top","left","right","innerWidth","entries","map","k","v","join","watch","removeAttribute","classList","add","$props","handler","handleWindowResize","mountEl","deep","mounted","setTimeout","beforeDestroy","rmEl","methods","remove","getEl","document","createElement","id","uniqueId","innerHTML","mainText","addons","forEach","addon","genElement","querySelector","SEQUENCES_CONTROL_ID","appendChild","component","this","constructor","$options","uniquePropsKey","JSON","stringify","resizeObserver","undefined","ResizeObserver","observe","body","disconnect","boundingRect","getAbsoluteBoundingRect","round","values","some"],"mappings":"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","file":"js/chunk-3156a367.03e8110f.js","sourcesContent":["<script>\n    import { SequenceStepChunkTextAttachedToArrow } from '@/sequences/SequenceStepChunk/chunk_text_attached_to_arrow/index'\n    import activator_position_watcher from '@/sequences/SequenceStepChunk/utils/activator_position_watcher'\n    import unique_id_mixin from '@/sequences/SequenceStepChunk/utils/unique_id_mixin'\n\n    const BASE_CLASS = 'chunk-with-text-attached-to-arrow'\n    const applyBaseClassModificator = modificator => `${BASE_CLASS}--${modificator}`\n\n    const POSITIONING_CLASSES = {\n        [SequenceStepChunkTextAttachedToArrow.POSITIONS.TOP]: applyBaseClassModificator`position-top`,\n        [SequenceStepChunkTextAttachedToArrow.POSITIONS.RIGHT]: applyBaseClassModificator`position-right`,\n        [SequenceStepChunkTextAttachedToArrow.POSITIONS.BOTTOM]: applyBaseClassModificator`position-bottom`,\n        [SequenceStepChunkTextAttachedToArrow.POSITIONS.LEFT]: applyBaseClassModificator`position-left`\n    }\n\n    const ALIGNMENT_CLASSES = {\n        [SequenceStepChunkTextAttachedToArrow.ALIGNMENT.TOP]: applyBaseClassModificator`align-top`,\n        [SequenceStepChunkTextAttachedToArrow.ALIGNMENT.RIGHT]: applyBaseClassModificator`align-right`,\n        [SequenceStepChunkTextAttachedToArrow.ALIGNMENT.BOTTOM]: applyBaseClassModificator`align-bottom`,\n        [SequenceStepChunkTextAttachedToArrow.ALIGNMENT.LEFT]: applyBaseClassModificator`align-left`\n    }\n\n    const WINDOW_SCROLLBAR_WIDTH = 17\n\n    export default {\n        name: \"ChunkTextAttachedToArrow\",\n        _name: \"ChunkTextAttachedToArrow\",\n        mixins: [activator_position_watcher, unique_id_mixin],\n        render() {\n            return null\n        },\n        props: {\n            sequenceId: String,\n            stepId: String,\n            chunkId: String,\n            chunkDefinition: {\n                type: Object,\n                required: true\n            },\n            anchorSelector: {\n                type: String,\n                required: true\n            }\n        },\n        data: () => ({\n            el: null,\n        }),\n        computed: {\n            classes() {\n                return [\n                    BASE_CLASS,\n                    POSITIONING_CLASSES[this.chunkDefinition.position],\n                    ALIGNMENT_CLASSES[this.chunkDefinition.align],\n                    ...(this.chunkDefinition.withoutArrow ? [applyBaseClassModificator('without-arrow')] : [])\n                ]\n            },\n            style() {\n                if (!this.isMounted_)\n                    return\n\n                const toReturn = {'z-index': 1000, 'max-width': '400px'}\n                const position = this.chunkDefinition.position\n                const align = this.chunkDefinition.align\n\n\n                // POSITION\n                if (position === SequenceStepChunkTextAttachedToArrow.POSITIONS.TOP)\n                    toReturn.bottom = (window.innerHeight - this.activatorBounding.top) + 'px'\n                if (position === SequenceStepChunkTextAttachedToArrow.POSITIONS.RIGHT)\n                    toReturn.left = this.activatorBounding.right + 'px'\n                if (position === SequenceStepChunkTextAttachedToArrow.POSITIONS.BOTTOM)\n                    toReturn.top = this.activatorBounding.bottom + 'px'\n                if (position === SequenceStepChunkTextAttachedToArrow.POSITIONS.LEFT)\n                    toReturn.right = (window.innerWidth - this.activatorBounding.left) + 'px'\n\n\n                // ALIGN\n                if (align === SequenceStepChunkTextAttachedToArrow.ALIGNMENT.TOP)\n                    toReturn.top = this.activatorBounding.top + 'px'\n                if (align === SequenceStepChunkTextAttachedToArrow.ALIGNMENT.RIGHT)\n                    toReturn.right = (window.innerWidth - this.activatorBounding.right - WINDOW_SCROLLBAR_WIDTH) + 'px'\n                if (align === SequenceStepChunkTextAttachedToArrow.ALIGNMENT.BOTTOM)\n                    toReturn.bottom = (window.innerHeight - this.activatorBounding.bottom) + 'px'\n                if (align === SequenceStepChunkTextAttachedToArrow.ALIGNMENT.LEFT)\n                    toReturn.left = this.activatorBounding.left + 'px'\n\n                return Object.entries(toReturn).map(([k, v]) => `${k}:${v}`).join(';')\n            }\n        },\n        watch: {\n            classes(v) {\n                if (this.el) {\n                    this.el.removeAttribute('class')\n\n                    this.el.classList.add(...v)\n                }\n            },\n            style(v) {\n                if (this.el) {\n                    this.el.style = v\n                }\n            },\n            $props: {\n                handler() {\n                    this.handleWindowResize()\n                    this.mountEl()\n                },\n                deep: true\n            }\n        },\n        mounted() {\n            setTimeout(() => {\n                this.mountEl()\n            }, 10)\n\n        },\n        beforeDestroy() {\n            this.rmEl()\n        },\n        methods: {\n            rmEl() {\n                if (this.el)\n                    this.el.remove()\n\n                if (this.getEl())\n                    this.getEl().remove()\n\n            },\n            mountEl() {\n                this.rmEl()\n\n                this.el = document.createElement('div')\n                this.el.id = this.uniqueId\n\n                let innerHTML = this.chunkDefinition.mainText\n\n                this.el.classList.add(...this.classes)\n                this.el.style = this.style\n\n                this.chunkDefinition.addons.forEach(addon => {\n                    innerHTML += addon.genElement()\n                })\n\n                this.el.innerHTML = innerHTML\n\n                document.querySelector(this.SEQUENCES_CONTROL_ID).appendChild(this.el)\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n\n</style>","var render, staticRenderFns\nimport script from \"./ChunkTextAttachedToArrow.vue?vue&type=script&lang=js&\"\nexport * from \"./ChunkTextAttachedToArrow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkTextAttachedToArrow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkTextAttachedToArrow.vue?vue&type=script&lang=js&\"","export default {\n    props: {\n        sequenceId: String,\n        stepId: String,\n        chunkId: String,\n        chunkDefinition: Object\n    },\n    computed: {\n        uniqueId() {\n            return `${this.sequenceId}---${this.stepId}---${this.chunkId}---${this.chunkDefinition.constructor.name}---${this.$options._name}`\n        },\n        uniquePropsKey() {\n            return JSON.stringify(this.$props)\n        }\n    },\n    methods: {\n        getEl() {\n            return document.querySelector('#' + this.uniqueId)\n        }\n    }\n}","import { getAbsoluteBoundingRect } from '@/utils/misc'\n\nexport default {\n    props: {\n        anchorSelector: {\n            type: String,\n            required: true\n        }\n    },\n    data: () => ({\n        activatorBounding: {},\n        resizeObserver: undefined\n    }),\n    mounted() {\n        this.resizeObserver = new ResizeObserver(this.handleWindowResize)\n        this.resizeObserver.observe(document.body)\n    },\n    beforeDestroy() {\n        this.resizeObserver.disconnect()\n    },\n    methods: {\n        handleWindowResize() {\n            if (document.querySelector(this.anchorSelector)) {\n                const boundingRect = getAbsoluteBoundingRect(document.querySelector(this.anchorSelector), {round: true})\n                if (Object.values(boundingRect).some(v => v !== 0)) // to avoid weird behavior\n                    this.activatorBounding = boundingRect\n            }\n        }\n    }\n}"],"sourceRoot":""}