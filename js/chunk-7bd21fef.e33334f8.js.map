{"version":3,"sources":["webpack:///./src/sequences/SequenceStepChunk/chunk_with_arrow/ChunkWithArrow.vue?757a","webpack:///./src/sequences/SequenceStepChunk/chunk_with_arrow/ChunkWithArrow.vue?2fb3","webpack:///src/sequences/SequenceStepChunk/chunk_with_arrow/ChunkWithArrow.vue","webpack:///./src/sequences/SequenceStepChunk/chunk_with_arrow/ChunkWithArrow.vue?c964","webpack:///./src/sequences/SequenceStepChunk/chunk_with_arrow/ChunkWithArrow.vue","webpack:///./src/sequences/SequenceStepChunk/utils/unique_id_mixin.js","webpack:///./src/sequences/SequenceStepChunk/utils/activator_position_watcher.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","chunkDefinition","arrowHidden","Object","values","activatorBounding","some","a","key","uniquePropsKey","attrs","SEQUENCES_CONTROL_ID","class","classes","style","uniqueId","_e","staticRenderFns","BASE_CLASS","applyBaseClassModificator","modificator","POSITIONING_CLASSES","SequenceStepChunkWithArrow","POSITIONS","TOP","RIGHT","BOTTOM","LEFT","name","_name","mixins","activator_position_watcher","unique_id_mixin","components","Teleport","props","type","required","anchorSelector","String","computed","position","isMounted_","toReturn","top","left","right","transform","bottom","entries","map","k","v","join","watch","mounted","beforeDestroy","component","sequenceId","stepId","chunkId","constructor","$options","JSON","stringify","$props","methods","getEl","document","querySelector","data","resizeObserver","undefined","ResizeObserver","handleWindowResize","observe","body","disconnect","boundingRect","getAbsoluteBoundingRect","round"],"mappings":"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","file":"js/chunk-7bd21fef.e33334f8.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkWithArrow.vue?vue&type=style&index=0&id=3ebda3bf&prod&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.chunkDefinition && !_vm.chunkDefinition.arrowHidden && Object.values(_vm.activatorBounding).some(function (a) { return a !== 0; }))?_c('Teleport',{key:_vm.uniquePropsKey,attrs:{\"to\":_vm.SEQUENCES_CONTROL_ID}},[_c('div',{class:_vm.classes,style:(_vm.style),attrs:{\"id\":_vm.uniqueId}},[_c('img',{attrs:{\"src\":\"/Arrow.svg\"}})])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <Teleport :to=\"SEQUENCES_CONTROL_ID\" :key=\"uniquePropsKey\" v-if=\"chunkDefinition && !chunkDefinition.arrowHidden && Object.values(activatorBounding).some(a => a !== 0)\">\n        <div\n                :class=\"classes\"\n                :style=\"style\"\n                :id=\"uniqueId\"\n        >\n            <img src=\"/Arrow.svg\">\n        </div>\n    </Teleport>\n</template>\n\n<script>\n    import { SequenceStepChunkWithArrow } from '@/sequences/SequenceStepChunk/chunk_with_arrow/index'\n    import { generateUUID, getAbsoluteBoundingRect } from '@/utils/misc'\n    import activator_position_watcher from '@/sequences/SequenceStepChunk/utils/activator_position_watcher'\n    import unique_id_mixin from '@/sequences/SequenceStepChunk/utils/unique_id_mixin'\n\n    const BASE_CLASS = 'chunk-with-arrow'\n    const applyBaseClassModificator = modificator => `${BASE_CLASS}--${modificator}`\n\n    const POSITIONING_CLASSES = {\n        [SequenceStepChunkWithArrow.POSITIONS.TOP]: applyBaseClassModificator`top`,\n        [SequenceStepChunkWithArrow.POSITIONS.RIGHT]: applyBaseClassModificator`right`,\n        [SequenceStepChunkWithArrow.POSITIONS.BOTTOM]: applyBaseClassModificator`bottom`,\n        [SequenceStepChunkWithArrow.POSITIONS.LEFT]: applyBaseClassModificator`left`\n    }\n\n    export default {\n        name: \"ChunkWithArrow\",\n        _name: \"ChunkWithArrow\",\n        mixins: [activator_position_watcher, unique_id_mixin],\n        components: {\n            Teleport: () => import('vue2-teleport')\n        },\n        // render() {\n        //     return null\n        // },\n        props: {\n            chunkDefinition: {\n                type: Object,\n                required: true\n            },\n            anchorSelector: {\n                type: String,\n                required: true\n            }\n        },\n        computed: {\n            classes() {\n                return [\n                    BASE_CLASS,\n                    POSITIONING_CLASSES[this.chunkDefinition.position]\n                ]\n            },\n            style() {\n                if (!this.isMounted_)\n                    return\n                const toReturn = {'z-index': 999999999999999}\n                const position = this.chunkDefinition.position\n\n                if (position === SequenceStepChunkWithArrow.POSITIONS.TOP)\n                    toReturn.top = this.activatorBounding.top - 70 + 'px'\n                if (position === SequenceStepChunkWithArrow.POSITIONS.RIGHT) {\n                    toReturn.left = this.activatorBounding.right + 20 + 'px'\n                    toReturn.transform = 'rotate(90deg)'\n                }\n                if (position === SequenceStepChunkWithArrow.POSITIONS.BOTTOM) {\n                    toReturn.transform = 'rotate(180deg)'\n                    toReturn.top = this.activatorBounding.bottom + 'px'\n                }\n                if (position === SequenceStepChunkWithArrow.POSITIONS.LEFT) {\n                    toReturn.left = this.activatorBounding.left - 60 + 'px'\n                    toReturn.transform = 'rotate(-90deg)'\n                }\n                if (position === SequenceStepChunkWithArrow.POSITIONS.TOP || position === SequenceStepChunkWithArrow.POSITIONS.BOTTOM)\n                    toReturn.left = this.activatorBounding.left + 'px'\n\n\n                if (position === SequenceStepChunkWithArrow.POSITIONS.RIGHT || position === SequenceStepChunkWithArrow.POSITIONS.LEFT)\n                    toReturn.top = this.activatorBounding.top - 20 + 'px'\n\n                return Object.entries(toReturn).map(([k, v]) => `${k}:${v}`).join(';')\n            }\n        },\n        watch: {\n            // classes(v) {\n            //     if (this.getEl()) {\n            //         this.getEl().removeAttribute('class')\n            //\n            //         this.getEl().classList.add(...v)\n            //     }\n            // },\n            // style: {\n            //     handler(v) {\n            //         if (this.getEl()) {\n            //             this.getEl().style = v\n            //         }\n            //     },\n            //     immediate: true\n            // }\n        },\n        mounted() {\n            // if (!this.getEl()) {\n            //     const el = document.createElement('div')\n            //     el.id = this.uniqueId\n            //     el.innerHTML = `<img src=\"/Arrow.svg\">`\n            //\n            //     el.classList.add(...this.classes)\n            //     el.style = this.style\n            //\n            //     document.querySelector(this.SEQUENCES_CONTROL_ID).appendChild(el)\n            //\n            //     setTimeout(this.handleWindowResize, 100)\n            // }\n        },\n        beforeDestroy() {\n            // if (this.getEl())\n            //     document.querySelector(this.SEQUENCES_CONTROL_ID).removeChild(this.getEl())\n        },\n    }\n</script>\n\n<style lang=\"scss\">\n    .chunk-with-arrow {\n        position: absolute;\n        top: 10px;\n\n        img {\n            width: 35px;\n            height: auto;\n        }\n    }\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkWithArrow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkWithArrow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChunkWithArrow.vue?vue&type=template&id=3ebda3bf&\"\nimport script from \"./ChunkWithArrow.vue?vue&type=script&lang=js&\"\nexport * from \"./ChunkWithArrow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChunkWithArrow.vue?vue&type=style&index=0&id=3ebda3bf&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n    props: {\n        sequenceId: String,\n        stepId: String,\n        chunkId: String,\n        chunkDefinition: Object\n    },\n    computed: {\n        uniqueId() {\n            return `${this.sequenceId}---${this.stepId}---${this.chunkId}---${this.chunkDefinition.constructor.name}---${this.$options._name}`\n        },\n        uniquePropsKey() {\n            return JSON.stringify(this.$props)\n        }\n    },\n    methods: {\n        getEl() {\n            return document.querySelector('#' + this.uniqueId)\n        }\n    }\n}","import { getAbsoluteBoundingRect } from '@/utils/misc'\n\nexport default {\n    props: {\n        anchorSelector: {\n            type: String,\n            required: true\n        }\n    },\n    data: () => ({\n        activatorBounding: {},\n        resizeObserver: undefined\n    }),\n    mounted() {\n        this.resizeObserver = new ResizeObserver(this.handleWindowResize)\n        this.resizeObserver.observe(document.body)\n    },\n    beforeDestroy() {\n        this.resizeObserver.disconnect()\n    },\n    methods: {\n        handleWindowResize() {\n            if (document.querySelector(this.anchorSelector)) {\n                const boundingRect = getAbsoluteBoundingRect(document.querySelector(this.anchorSelector), {round: true})\n                if (Object.values(boundingRect).some(v => v !== 0)) // to avoid weird behavior\n                    this.activatorBounding = boundingRect\n            }\n        }\n    }\n}"],"sourceRoot":""}