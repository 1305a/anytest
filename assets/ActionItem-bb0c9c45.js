import{I as L,r as p,q as R,a as n,o as i,c as y,b as a,w as o,f as r,x as b,F as g,e as $,d as v,y as A,J as h}from"./index-c1a71c60.js";const M={__name:"ActionItem",props:["action"],setup(t){const I=t,x=L().params.testId,u=p(!1),s=p([]),N=[{value:"previous",label:"Назад"},{value:"next",label:"Далее"},{value:"moveToStep",label:"Переход к блоку"},{value:"closeModalWarning",label:"Закрыть модальное окно"},{value:"startAgain",label:"Начать заново"},{value:"closeSession",label:"Закрыть сессию"},{value:"doAnswerAction",label:"Переход по ответу"}],k=async()=>{const f=await h.getBlocks(x);s.value=f.data.data.map(e=>({seqNo:e.seq_no,internalId:e.internal_id,name:e.body.name})),s.value.sort((e,d)=>e.seqNo-d.seqNo)},_=async()=>{u.value=!0,await k()},q=(f,e)=>{I.action.internalId=e.internalId,u.value=!1};return R(()=>{k()}),(f,e)=>{const d=n("el-checkbox"),c=n("el-form-item"),B=n("el-option"),C=n("el-select"),S=n("el-switch"),T=n("el-col"),V=n("el-button"),m=n("el-table-column"),U=n("el-table"),z=n("el-dialog");return i(),y(g,null,[a(T,{span:8,offset:1},{default:o(()=>[t.action.doAction!=null?(i(),r(c,{key:0,label:"Выполнять действие ?"},{default:o(()=>[a(d,{modelValue:t.action.doAction,"onUpdate:modelValue":e[0]||(e[0]=l=>t.action.doAction=l),size:"large"},null,8,["modelValue"])]),_:1})):b("",!0),t.action.clickAction!=null?(i(),r(c,{key:1,label:"Выполнить при нажатии ?"},{default:o(()=>[a(d,{modelValue:t.action.clickAction,"onUpdate:modelValue":e[1]||(e[1]=l=>t.action.clickAction=l),size:"large"},null,8,["modelValue"])]),_:1})):b("",!0),a(c,{label:"Действие:"},{default:o(()=>[a(C,{class:"m-2",modelValue:t.action.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.action.name=l),placeholder:"Select"},{default:o(()=>[(i(),y(g,null,$(N,l=>a(B,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),a(c,{label:"Проверка вопроса:"},{default:o(()=>[a(S,{modelValue:t.action.checkQuestion,"onUpdate:modelValue":e[3]||(e[3]=l=>t.action.checkQuestion=l),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),a(c,{label:"Отслеживать повторный переход/ответ ?"},{default:o(()=>[a(d,{modelValue:t.action.trackRepeatAnswer,"onUpdate:modelValue":e[4]||(e[4]=l=>t.action.trackRepeatAnswer=l),size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.action.name==="moveToStep"?(i(),r(V,{key:0,onClick:e[5]||(e[5]=l=>_())},{default:o(()=>[v("Выбрать блок")]),_:1})):b("",!0),a(z,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=l=>u.value=l),title:"Выберите блок"},{default:o(()=>[a(U,{data:s.value},{default:o(()=>[a(m,{property:"seqNo",label:"Порядковый номер",width:"110"}),a(m,{property:"internalId",label:"Внутренний id",width:"120"}),a(m,{property:"name",label:"Наименование блока",width:"300"}),a(m,{property:"name",label:"Выбор",width:"100"},{default:o(l=>[a(V,{size:"small",onClick:w=>q(l.$index,l.row)},{default:o(()=>[v("Выбрать")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),t.action.name==="moveToStep"?(i(),r(c,{key:1,label:"Внутренний id:"},{default:o(()=>{var l;return[v(A(t.action.internalId)+" Блок: "+A((l=s.value.find(w=>w.internalId===t.action.internalId))==null?void 0:l.name),1)]}),_:1})):b("",!0)],64)}}};export{M as default};
