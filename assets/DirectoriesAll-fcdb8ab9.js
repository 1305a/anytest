import{r,o as x,b as S,_ as j,d as b,e as D,w as l,f as e,u as g,g as B,h as M,i as N,s as m,E as w,j as q}from"./index-096d2e4a.js";function G(U,_){const u=r("el-tab-pane");return x(),S(u,{label:"Компания"})}const H={},I=j(H,[["render",G]]),J={__name:"ThemesDirectory",setup(U){const _=b([]),u=b([]),c=b({name:"",title:""}),d=async()=>{try{const s=await m.getThemes();_.value=s.data.data,u.value=_.value.map(()=>!0)}catch(s){console.error(s)}};D(()=>{d()});const y=async(s,t)=>{try{await m.updateTheme(s,t),d()}catch(o){console.error(o),w.error({message:`Произошла ошибка: ${o.message}`,duration:0})}},F=async(s,t)=>{try{await m.updateTheme(s,{...t,is_active:!t.is_active}),t.is_active=!t.is_active}catch(o){console.error(o),w.error({message:`Произошла ошибка: ${o.message}`,duration:0})}},k=async()=>{try{const s={name:c.value.name,title:c.value.title};await m.createTheme(s),c.value.title="",c.value.name="",d()}catch(s){console.error(s),w.error({message:`Произошла ошибка: ${s.message}`,duration:0})}},z=(s,t,o)=>{u.value[s]=!u.value[s],u.value[s]&&y(t,o)},A=async s=>{try{await m.deleteTheme(s),d()}catch(t){console.error(t)}};return(s,t)=>{const o=r("el-input"),i=r("el-table-column"),p=r("el-switch"),V=r("el-popconfirm"),h=r("el-icon"),v=r("el-button"),T=r("el-table"),C=r("el-col"),$=r("el-row"),E=r("el-tab-pane");return x(),S(E,{label:"Тематика сценариев"},{default:l(()=>[e(T,{data:_.value,style:{width:"100%"},border:"",height:"650"},{default:l(()=>[e(i,{label:"Имя"},{default:l(n=>[e(o,{modelValue:n.row.name,"onUpdate:modelValue":a=>n.row.name=a,disabled:u.value[n.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(i,{label:"Заголовок"},{default:l(n=>[e(o,{modelValue:n.row.title,"onUpdate:modelValue":a=>n.row.title=a,disabled:u.value[n.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(i,{prop:"is_active",label:"Публикация",width:"120"},{default:l(n=>[e(V,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Изменить статус?",onConfirm:a=>F(n.row.id,n.row),width:"180px"},{reference:l(()=>[e(p,{value:n.row.is_active,style:{"--el-switch-on-color":"#2C3E50","--el-switch-off-color":"#797979"}},null,8,["value"])]),_:2},1032,["onConfirm"])]),_:1}),e(i,{label:"Управление",width:"120"},{default:l(n=>[e(V,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Вы уверены, что хотите удалить тематику?",onConfirm:a=>A(n.row.id)},{reference:l(()=>[e(v,{size:"small"},{default:l(()=>[e(h,{size:"small",color:"#F83A3A"},{default:l(()=>[e(g(B))]),_:1})]),_:1})]),_:2},1032,["onConfirm"]),e(v,{size:"small",onClick:a=>z(n.$index,n.row.id,n.row)},{default:l(()=>[e(h,{size:"small",color:"#FF8A00"},{default:l(()=>[e(g(M))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e($,null,{default:l(()=>[e(C,{class:"input-col",span:9},{default:l(()=>[e(o,{modelValue:c.value.name,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value.name=n),placeholder:"Имя"},null,8,["modelValue"])]),_:1}),e(C,{class:"input-col",span:9},{default:l(()=>[e(o,{modelValue:c.value.title,"onUpdate:modelValue":t[1]||(t[1]=n=>c.value.title=n),placeholder:"Заголовок"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{class:"btn__filter",color:"#2C3E50",onClick:t[2]||(t[2]=n=>k())},{default:l(()=>[N("Добавить новый ")]),_:1})]),_:1})}}},K={__name:"TypesDirectory",setup(U){const _=q(),u=b([]),c=b([]),d=b({name:"",description:""}),y=async()=>{try{await _.defineTypes(),u.value=_.uniqueTypes,c.value=u.value.map(()=>!0)}catch(t){console.error(t)}};D(()=>{y()});const F=async(t,o)=>{try{await m.updateTestType(t,o),_.saveTypes(u.value)}catch(i){console.error(i),w.error({message:`Произошла ошибка: ${i.message}`,duration:0})}},k=async(t,o)=>{try{await m.updateTestType(t,{...o,is_active:!o.is_active}),o.is_active=!o.is_active,_.saveTypes(u.value)}catch(i){console.error(i),w.error({message:`Произошла ошибка: ${i.message}`,duration:0})}},z=async()=>{try{const t={name:d.value.name,description:d.value.description};await m.createType(t),d.value.description="",d.value.name="",y()}catch(t){console.error(t),w.error({message:`Произошла ошибка: ${t.message}`,duration:0})}},A=(t,o,i)=>{c.value[t]=!c.value[t],console.log(c),c.value[t]&&F(o,i)},s=async t=>{try{await m.deleteType(t),y()}catch(o){console.error(o)}};return(t,o)=>{const i=r("el-input"),p=r("el-table-column"),V=r("el-switch"),h=r("el-popconfirm"),v=r("el-icon"),T=r("el-button"),C=r("el-table"),$=r("el-col"),E=r("el-row"),n=r("el-tab-pane");return x(),S(n,{label:"Типы сценариев"},{default:l(()=>[e(C,{data:u.value,style:{width:"100%"},border:"",height:"650"},{default:l(()=>[e(p,{label:"Имя"},{default:l(a=>[e(i,{modelValue:a.row.name,"onUpdate:modelValue":f=>a.row.name=f,disabled:c.value[a.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(p,{label:"Описание"},{default:l(a=>[e(i,{modelValue:a.row.description,"onUpdate:modelValue":f=>a.row.description=f,disabled:c.value[a.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(p,{prop:"is_active",label:"Публикация",width:"120"},{default:l(a=>[e(h,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Изменить статус?",onConfirm:f=>k(a.row.id,a.row),width:"180px"},{reference:l(()=>[e(V,{value:a.row.is_active,style:{"--el-switch-on-color":"#2C3E50","--el-switch-off-color":"#797979"}},null,8,["value"])]),_:2},1032,["onConfirm"])]),_:1}),e(p,{label:"Управление",width:"120"},{default:l(a=>[e(h,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Вы уверены, что хотите удалить тип?",onConfirm:f=>s(a.row.id)},{reference:l(()=>[e(T,{size:"small"},{default:l(()=>[e(v,{size:"small",color:"#F83A3A"},{default:l(()=>[e(g(B))]),_:1})]),_:1})]),_:2},1032,["onConfirm"]),e(T,{size:"small",onClick:f=>A(a.$index,a.row.id,a.row)},{default:l(()=>[e(v,{size:"small",color:"#FF8A00"},{default:l(()=>[e(g(M))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(E,null,{default:l(()=>[e($,{class:"input-col",span:9},{default:l(()=>[e(i,{modelValue:d.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>d.value.name=a),placeholder:"Имя"},null,8,["modelValue"])]),_:1}),e($,{class:"input-col",span:9},{default:l(()=>[e(i,{modelValue:d.value.description,"onUpdate:modelValue":o[1]||(o[1]=a=>d.value.description=a),placeholder:"Описание"},null,8,["modelValue"])]),_:1})]),_:1}),e(T,{class:"btn__filter",color:"#2C3E50",onClick:o[2]||(o[2]=a=>z())},{default:l(()=>[N("Добавить новый")]),_:1})]),_:1})}}},O={__name:"DirectoriesAll",setup(U){return(_,u)=>{const c=r("el-tabs");return x(),S(c,{type:"border-card"},{default:l(()=>[e(I),e(J),e(K)]),_:1})}}};export{O as default};
