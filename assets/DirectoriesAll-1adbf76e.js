import{r as _,b as J,d as s,o as K,e as L,w as o,s as i,f as e,g as x,u as C,E as w,h as k,i as z}from"./index-7565fa42.js";const Q={__name:"DirectoriesAll",setup(O){const g=_([]),$=_([]);_(!0);const p=_([]),v=_([]),u=_({name:"",title:""}),d=_({name:"",description:""}),b=async()=>{try{const l=await i.getThemes();$.value=l.data.data,v.value=$.value.map(()=>!0)}catch(l){console.error(l)}},h=async()=>{try{const l=await i.getTestTypes();g.value=l.data.data,p.value=g.value.map(()=>!0)}catch(l){console.error(l)}};J(()=>{b(),h()});const A=async(l,a)=>{try{await i.updateTheme(l,a),b()}catch(n){console.error(n),w.error({message:`Произошла ошибка: ${n.message}`,duration:0})}},E=async(l,a)=>{try{await i.updateTestType(l,a),h()}catch(n){console.error(n),w.error({message:`Произошла ошибка: ${n.message}`,duration:0})}},B=async(l,a)=>{try{await i.updateTheme(l,{...a,is_active:!a.is_active}),a.is_active=!a.is_active}catch(n){console.error(n),w.error({message:`Произошла ошибка: ${n.message}`,duration:0})}},M=async(l,a)=>{try{await i.updateTestType(l,{...a,is_active:!a.is_active}),a.is_active=!a.is_active}catch(n){console.error(n),w.error({message:`Произошла ошибка: ${n.message}`,duration:0})}},N=async()=>{try{const l={name:u.value.name,title:u.value.title};await i.createTheme(l),u.value.title="",u.value.name="",b()}catch(l){console.error(l),w.error({message:`Произошла ошибка: ${l.message}`,duration:0})}},D=async()=>{try{const l={name:d.value.name,description:d.value.description};await i.createType(l),d.value.description="",d.value.name="",h()}catch(l){console.error(l),w.error({message:`Произошла ошибка: ${l.message}`,duration:0})}},j=(l,a,n)=>{v.value[l]=!v.value[l],v.value[l]&&A(a,n)},q=(l,a,n)=>{p.value[l]=!p.value[l],p.value[l]&&E(a,n)},G=async l=>{try{await i.deleteTheme(l),b()}catch(a){console.error(a)}},H=async l=>{try{await i.deleteType(l),h()}catch(a){console.error(a)}};return(l,a)=>{const n=s("el-tab-pane"),c=s("el-input"),m=s("el-table-column"),S=s("el-switch"),y=s("el-popconfirm"),T=s("el-icon"),f=s("el-button"),U=s("el-table"),V=s("el-col"),F=s("el-row"),I=s("el-tabs");return K(),L(I,{type:"border-card"},{default:o(()=>[e(n,{label:"Компании"},{default:o(()=>[x("Компании")]),_:1}),e(n,{label:"Тематика сценариев"},{default:o(()=>[e(U,{data:$.value,style:{width:"100%"},border:"",height:"400"},{default:o(()=>[e(m,{label:"Имя"},{default:o(t=>[e(c,{modelValue:t.row.name,"onUpdate:modelValue":r=>t.row.name=r,disabled:v.value[t.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(m,{label:"Заголовок"},{default:o(t=>[e(c,{modelValue:t.row.title,"onUpdate:modelValue":r=>t.row.title=r,disabled:v.value[t.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(m,{prop:"is_active",label:"Публикация",width:"120"},{default:o(t=>[e(y,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Изменить статус?",onConfirm:r=>B(t.row.id,t.row),width:"180px"},{reference:o(()=>[e(S,{value:t.row.is_active,style:{"--el-switch-on-color":"#2C3E50","--el-switch-off-color":"#797979"}},null,8,["value"])]),_:2},1032,["onConfirm"])]),_:1}),e(m,{label:"Управление",width:"120"},{default:o(t=>[e(y,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Вы уверены, что хотите удалить тематику?",onConfirm:r=>G(t.row.id)},{reference:o(()=>[e(f,{size:"small"},{default:o(()=>[e(T,{size:"small",color:"#F83A3A"},{default:o(()=>[e(C(k))]),_:1})]),_:1})]),_:2},1032,["onConfirm"]),e(f,{size:"small",onClick:r=>j(t.$index,t.row.id,t.row)},{default:o(()=>[e(T,{size:"small",color:"#FF8A00"},{default:o(()=>[e(C(z))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(F,null,{default:o(()=>[e(V,{class:"input-col",span:9},{default:o(()=>[e(c,{modelValue:u.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value.name=t),placeholder:"Имя"},null,8,["modelValue"])]),_:1}),e(V,{class:"input-col",span:9},{default:o(()=>[e(c,{modelValue:u.value.title,"onUpdate:modelValue":a[1]||(a[1]=t=>u.value.title=t),placeholder:"Заголовок"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{class:"btn__filter",color:"#2C3E50",onClick:a[2]||(a[2]=t=>N())},{default:o(()=>[x("Добавить новый ")]),_:1})]),_:1}),e(n,{label:"Типы сценариев"},{default:o(()=>[e(U,{data:g.value,style:{width:"100%"},border:"",height:"400"},{default:o(()=>[e(m,{label:"Имя"},{default:o(t=>[e(c,{modelValue:t.row.name,"onUpdate:modelValue":r=>t.row.name=r,disabled:p.value[t.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(m,{label:"Описание"},{default:o(t=>[e(c,{modelValue:t.row.description,"onUpdate:modelValue":r=>t.row.description=r,disabled:p.value[t.$index]},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(m,{prop:"is_active",label:"Публикация",width:"120"},{default:o(t=>[e(y,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Изменить статус?",onConfirm:r=>M(t.row.id,t.row),width:"180px"},{reference:o(()=>[e(S,{value:t.row.is_active,style:{"--el-switch-on-color":"#2C3E50","--el-switch-off-color":"#797979"}},null,8,["value"])]),_:2},1032,["onConfirm"])]),_:1}),e(m,{label:"Управление",width:"120"},{default:o(t=>[e(y,{"confirm-button-text":"Да","cancel-button-text":"Нет","icon-color":"#F56C6C",title:"Вы уверены, что хотите удалить тип?",onConfirm:r=>H(t.row.id)},{reference:o(()=>[e(f,{size:"small"},{default:o(()=>[e(T,{size:"small",color:"#F83A3A"},{default:o(()=>[e(C(k))]),_:1})]),_:1})]),_:2},1032,["onConfirm"]),e(f,{size:"small",onClick:r=>q(t.$index,t.row.id,t.row)},{default:o(()=>[e(T,{size:"small",color:"#FF8A00"},{default:o(()=>[e(C(z))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(F,null,{default:o(()=>[e(V,{class:"input-col",span:9},{default:o(()=>[e(c,{modelValue:d.value.name,"onUpdate:modelValue":a[3]||(a[3]=t=>d.value.name=t),placeholder:"Имя"},null,8,["modelValue"])]),_:1}),e(V,{class:"input-col",span:9},{default:o(()=>[e(c,{modelValue:d.value.description,"onUpdate:modelValue":a[4]||(a[4]=t=>d.value.description=t),placeholder:"Описание"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{class:"btn__filter",color:"#2C3E50",onClick:a[5]||(a[5]=t=>D())},{default:o(()=>[x("Добавить новый")]),_:1})]),_:1})]),_:1})}}};export{Q as default};
