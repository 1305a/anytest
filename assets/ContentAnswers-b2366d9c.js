import k from"./WarningParameters-ced98bfe.js";import K from"./WarningCombination-0ced88d3.js";import{r as v,q as X,a as p,o as m,f as c,w as n,b as e,c as D,x as i,F as B,e as H,d as b,y as W,k as U,z as Y,A as Z,B as ee,v as q,g as te,C as ae,l as ne}from"./index-f78f8175.js";import le from"./ContentImages-811ecf1d.js";import oe from"./ColorItem-205dfbbd.js";import se from"./ActionItem-87d8a1cb.js";import me from"./AnswerCollections-3a031227.js";const ue={key:0},de={key:1},ie={key:0},pe={key:1},re={key:0,class:"answer_editor"},ce={class:"action_edit"},fe={key:0},ke={__name:"ContentAnswers",props:["componentData"],setup(u){const t=u,M=v(!1),h=v("main"),g=v(t.componentData.answersList.map(d=>!1)),L=v(!1),R=d=>{g.value[d]=!g.value[d]},N=()=>{L.value=!L.value},E=d=>{g.value.splice(d,1),t.componentData.answersList.splice(d,1)},z=d=>{let l=t.componentData.combinationOfAnswers.findIndex(f=>f.name===d);t.componentData.combinationOfAnswers.splice(l,1)},O=()=>{g.value.push(!1),t.componentData.combinationOfAnswers.push({name:"",isCorrect:!0,combinationWarning:{text:"",color:"",image:"",showTime:0,buttons:[{buttonName:"Закрыть",action:{name:"closeModalWarning"}}]}})},P=()=>{if(t.componentData.answersList.length===0)return 0;let d=!1;for(let o=0;o<t.componentData.answersList.length;o++)if(!t.componentData.answersList[o].id){d=!0;break}if(d){for(let o=0;o<t.componentData.answersList.length;o++)t.componentData.answersList[o].id=o+1;return t.componentData.answersList.length}const l=t.componentData.answersList.map(o=>o.id);return Math.max(...l)},S=()=>{t.componentData.answersList.push({id:P()+1,answerText:"",isRight:!1,notRequired:!1,image:{imageURL:"",label:""},action:{doAction:!1,clickAction:!1,name:"moveToStep",internalId:0,checkQuestion:!1,trackRepeatAnswer:!1},isRightAlt:!1})},F=()=>{t.componentData.imagesData==null&&(t.componentData.isAnswersWithImage=!1,t.componentData.imagesData={imagesWidthPercent:100,imagesList:[{imageURL:"",label:""}]}),t.componentData.textData==null&&(t.componentData.textData={text:""})};X(()=>{F()});const Q=d=>{t.componentData.answerCollections===void 0&&(t.componentData.answerCollections=[]),t.componentData.answerCollections.push(d)},j=d=>{const l=t.componentData.answerCollections.findIndex(f=>f.id===d);if(l===-1){log("Коллекция с таким id не найдена");return}t.componentData.answerCollections.splice(l,1)};return(d,l)=>{const f=p("el-switch"),o=p("el-form-item"),T=p("el-option"),G=p("el-select"),y=p("el-divider"),V=p("el-input"),w=p("el-button"),$=p("el-input-number"),s=p("el-col"),x=p("el-row"),C=p("el-text"),A=p("el-checkbox"),I=p("el-tab-pane"),J=p("el-tabs");return m(),c(J,{class:"demo-tabs",modelValue:h.value,"onUpdate:modelValue":l[20]||(l[20]=a=>h.value=a),type:"card",onTabClick:d.handleClick},{default:n(()=>[e(I,{label:"Основной",name:"main"},{default:n(()=>[e(o,{label:"Множественный выбор:"},{default:n(()=>[e(f,{modelValue:t.componentData.multiple,"onUpdate:modelValue":l[0]||(l[0]=a=>t.componentData.multiple=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"Вид кнопок:"},{default:n(()=>[e(G,{modelValue:t.componentData.answersButtonType,"onUpdate:modelValue":l[1]||(l[1]=a=>t.componentData.answersButtonType=a),placeholder:"please select"},{default:n(()=>[e(T,{label:"Чекбоксы",value:"checkboxes"}),e(T,{label:"Кнопки",value:"buttons"}),e(T,{label:"Картинки+чекбоксы",value:"imageCheckboxes"})]),_:1},8,["modelValue"])]),_:1}),e(y),e(o,{label:"Подсказки:"},{default:n(()=>[e(f,{modelValue:t.componentData.hints,"onUpdate:modelValue":l[2]||(l[2]=a=>t.componentData.hints=a)},null,8,["modelValue"])]),_:1}),t.componentData.hints?(m(),D("div",ue,[e(o,{label:"Количество попыток:"},{default:n(()=>[e(V,{modelValue:t.componentData.totalHints,"onUpdate:modelValue":l[3]||(l[3]=a=>t.componentData.totalHints=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"Анонс подсказки:"},{default:n(()=>[e(V,{modelValue:t.componentData.hintText,"onUpdate:modelValue":l[4]||(l[4]=a=>t.componentData.hintText=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"Открыть модальную подсказку:"},{default:n(()=>[e(f,{modelValue:t.componentData.useModalHint,"onUpdate:modelValue":l[5]||(l[5]=a=>t.componentData.useModalHint=a)},null,8,["modelValue"])]),_:1}),t.componentData.useModalHint&&t.componentData.modalHintDescription!==void 0?(m(),c(o,{key:0,label:"Текст дополнительного описания:"},{default:n(()=>[e(V,{modelValue:t.componentData.modalHintDescription,"onUpdate:modelValue":l[6]||(l[6]=a=>t.componentData.modalHintDescription=a)},null,8,["modelValue"])]),_:1})):i("",!0),M.value||u.componentData.showLegend!=null&&u.componentData!=null?(m(),D("div",de,[e(o,{label:"Показывать легенду альтернативных ответов:"},{default:n(()=>[e(f,{modelValue:u.componentData.showLegend,"onUpdate:modelValue":l[7]||(l[7]=a=>u.componentData.showLegend=a)},null,8,["modelValue"])]),_:1}),u.componentData.showLegend?(m(),D("div",ie,[e(o,{label:"Текст легенды альтернативных ответов:"},{default:n(()=>[e(V,{modelValue:u.componentData.legendText,"onUpdate:modelValue":l[8]||(l[8]=a=>u.componentData.legendText=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"Текст легенды альтернативных ответов цветной:"},{default:n(()=>[e(V,{modelValue:u.componentData.legendColoredText,"onUpdate:modelValue":l[9]||(l[9]=a=>u.componentData.legendColoredText=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"Цвет:"},{default:n(()=>[e(oe,{modelValue:u.componentData.legendTextColor,"onUpdate:modelValue":l[10]||(l[10]=a=>u.componentData.legendTextColor=a)},null,8,["modelValue"])]),_:1})])):i("",!0)])):i("",!0),e(k,{parameters:t.componentData.hintWarning},null,8,["parameters"])])):i("",!0),e(y),e(o,{label:"Предупреждения:"},{default:n(()=>[e(f,{modelValue:t.componentData.warnings,"onUpdate:modelValue":l[11]||(l[11]=a=>t.componentData.warnings=a)},null,8,["modelValue"])]),_:1}),t.componentData.warnings?(m(),D("div",pe,[e(o,{label:"Все верные:"}),e(k,{parameters:t.componentData.allCorrect},null,8,["parameters"]),e(o,{label:"Все неверные/часть неверных:"}),e(k,{parameters:t.componentData.allInorrectPartlyIncorrect},null,8,["parameters"]),e(o,{label:"Часть верных:"}),e(k,{parameters:t.componentData.partlyCorrect},null,8,["parameters"]),e(o,{label:"Часть верных + неверные:"}),e(k,{parameters:t.componentData.partlyCorrectpartlyIncorrect},null,8,["parameters"]),e(o,{label:"Все верные + неверные:"}),e(k,{parameters:t.componentData.allCorrectPartlyIncorrect},null,8,["parameters"]),e(o,{label:"Комбинации:"}),(m(!0),D(B,null,H(t.componentData.combinationOfAnswers,a=>(m(),D("div",null,[e(K,{parameters:a,onDeleteCombination:z},null,8,["parameters","onDeleteCombination"])]))),256)),e(w,{type:"success",round:"",onClick:O},{default:n(()=>[b("+ Добавить комбинацию")]),_:1})])):i("",!0),e(y),e(o,{label:"Стили:"},{default:n(()=>[e(o,{label:"Кол-во колонок:"},{default:n(()=>[e($,{modelValue:t.componentData.columns,"onUpdate:modelValue":l[12]||(l[12]=a=>t.componentData.columns=a),min:1,max:10},null,8,["modelValue"])]),_:1})]),_:1}),e(y),e(o,{label:"Содержание вопроса:"}),e(x,null,{default:n(()=>[e(s,{span:1}),e(s,{class:"question_text_col",span:12},{default:n(()=>[e(V,{modelValue:t.componentData.questionText,"onUpdate:modelValue":l[13]||(l[13]=a=>t.componentData.questionText=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:n(()=>[e(s,{span:1}),e(s,{span:12},{default:n(()=>[e(C,null,{default:n(()=>[b("Текст ответа")]),_:1})]),_:1}),e(s,{span:2},{default:n(()=>[e(C,null,{default:n(()=>[b("Правильный")]),_:1})]),_:1}),e(s,{span:2},{default:n(()=>[e(C,null,{default:n(()=>[b("Альт. прав.")]),_:1})]),_:1}),u.componentData.multiple?(m(),c(s,{key:0,span:2},{default:n(()=>[e(C,null,{default:n(()=>[b("Прав. необ.")]),_:1})]),_:1})):i("",!0),e(s,{span:2})]),_:1}),(m(!0),D(B,null,H(u.componentData.answersList,(a,_)=>(m(),c(x,{key:_,gutter:20},{default:n(()=>[e(s,{span:1},{default:n(()=>[e(C,null,{default:n(()=>[b(W(_+1),1)]),_:2},1024)]),_:2},1024),e(s,{span:1},{default:n(()=>[e(C,null,{default:n(()=>[b(W(a.id),1)]),_:2},1024)]),_:2},1024),e(s,{span:11},{default:n(()=>[e(V,{modelValue:a.answerText,"onUpdate:modelValue":r=>a.answerText=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{span:2},{default:n(()=>[e(A,{modelValue:a.isRight,"onUpdate:modelValue":r=>a.isRight=r,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a.isRightAlt!=null?(m(),c(s,{key:0,span:2},{default:n(()=>[e(A,{modelValue:a.isRightAlt,"onUpdate:modelValue":r=>a.isRightAlt=r,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):i("",!0),u.componentData.multiple?(m(),c(s,{key:1,span:2},{default:n(()=>[e(A,{modelValue:a.notRequired,"onUpdate:modelValue":r=>a.notRequired=r,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):i("",!0),e(s,{span:2},{default:n(()=>[e(w,{type:"danger",icon:U(Y),circle:"",onClick:r=>E(_)},null,8,["icon","onClick"])]),_:2},1024),e(s,{span:u.componentData.multiple?3:5},{default:n(()=>[g.value[_]?i("",!0):(m(),c(w,{key:0,type:"primary",icon:U(Z),plain:"",onClick:r=>R(_)},null,8,["icon","onClick"])),g.value[_]?(m(),c(w,{key:1,type:"primary",icon:U(ee),plain:"",onClick:r=>R(_)},null,8,["icon","onClick"])):i("",!0)]),_:2},1032,["span"]),e(s,{span:1}),e(s,{span:21},{default:n(()=>[g.value[_]?(m(),D("div",re,[e(q,{modelValue:a.answerText,"onUpdate:modelValue":r=>a.answerText=r},null,8,["modelValue","onUpdate:modelValue"]),te("div",ce,[e(se,{action:a.action},null,8,["action"])])])):i("",!0)]),_:2},1024),u.componentData.answersButtonType==="imageCheckboxes"&&a.image!=null?(m(),c(x,{key:2},{default:n(()=>[e(ae,{image:a.image,hideLabel:!0},null,8,["image"])]),_:2},1024)):i("",!0)]),_:2},1024))),128)),e(y),e(x,null,{default:n(()=>[e(s,{span:6},{default:n(()=>[e(w,{onClick:S,type:"success",round:""},{default:n(()=>[b("+ Добавить поле ")]),_:1})]),_:1})]),_:1}),u.componentData.answersList?(m(),c(me,{key:2,answerCollectionsData:u.componentData.answerCollections,answersList:u.componentData.answersList,onAddCollectionToList:l[14]||(l[14]=a=>Q(a)),onDeleteCollection:l[15]||(l[15]=a=>j(a))},null,8,["answerCollectionsData","answersList"])):i("",!0)]),_:1}),e(I,{label:"Стили",name:"style"},{default:n(()=>[e(o,{label:"Стили:"},{default:n(()=>[e(o,{label:"Кол-во колонок:"}),e($,{modelValue:t.componentData.columns,"onUpdate:modelValue":l[16]||(l[16]=a=>t.componentData.columns=a),min:1,max:10},null,8,["modelValue"])]),_:1})]),_:1}),e(I,{label:"С картинкой",name:"withImage"},{default:n(()=>[e(o,{label:"Ответы с картинками?"},{default:n(()=>[e(f,{modelValue:t.componentData.isAnswersWithImage,"onUpdate:modelValue":l[17]||(l[17]=a=>t.componentData.isAnswersWithImage=a),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),t.componentData.isAnswersWithImage?(m(),c(o,{key:0,label:"Текст:"},{default:n(()=>[e(s,{span:22},{default:n(()=>[e(V,{modelValue:t.componentData.textData.text,"onUpdate:modelValue":l[18]||(l[18]=a=>t.componentData.textData.text=a),width:"30vw"},null,8,["modelValue"])]),_:1}),e(s,{span:2},{default:n(()=>[e(w,{type:"primary",icon:U(ne),plain:"",onClick:N},null,8,["icon"])]),_:1}),e(s,{span:22},{default:n(()=>[L.value?(m(),D("div",fe,[e(q,{modelValue:t.componentData.textData.text,"onUpdate:modelValue":l[19]||(l[19]=a=>t.componentData.textData.text=a)},null,8,["modelValue"])])):i("",!0)]),_:1})]),_:1})):i("",!0),e(o,{label:"Картинки:"},{default:n(()=>[t.componentData.imagesData!=null?(m(),c(le,{key:0,componentData:t.componentData.imagesData},null,8,["componentData"])):i("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","onTabClick"])}}};export{ke as default};
